<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css">
    <title>Work Day Scheduler</title>
  </head>

  <body>
    <header class="jumbotron">
      <h1 class="display-3">Work Day Scheduler</h1>
      <p class="lead">A simple calendar app for scheduling your work day</p>
      <p id="currentDay" class="lead"></p>
    </header>
    <div class="container">
      <!-- Timeblocks go here -->
      <div class="row time-block" id="hr00">
        <div class="col-md-1 hour">
          00
        </div>
        <input class="col-md-10 description" id="00">
        </input>
        <button class="btn saveBtn col-md-1" id="00">Save!</button>
      </div>
      <div class="row time-block" id="hr01">
        <div class="col-md-1 hour">
          01
        </div>
        <input class="col-md-10 description" id="01">
        </input>
        <button class="btn saveBtn col-md-1" id="01">Save!</button>
      </div>
      <div class="row time-block" id="hr02">
        <div class="col-md-1 hour">
          02
        </div>
        <input class="col-md-10 description" id="02">
        </input>
        <button class="btn saveBtn col-md-1" id="02">Save!</button>
      </div>
      <div class="row time-block" id="hr03">
        <div class="col-md-1 hour">
          03
        </div>
        <input class="col-md-10 description" id="03">
        </input>
        <button class="btn saveBtn col-md-1" id="03">Save!</button>
      </div>
      <div class="row time-block" id="hr04">
        <div class="col-md-1 hour">
          04
        </div>
        <input class="col-md-10 description" id="04">
        </input>
        <button class="btn saveBtn col-md-1" id="04">Save!</button>
      </div>
      <div class="row time-block" id="hr05">
        <div class="col-md-1 hour">
          05
        </div>
        <input class="col-md-10 description" id="05">
        </input>
        <button class="btn saveBtn col-md-1" id="05">Save!</button>
      </div>
      <div class="row time-block" id="hr06">
        <div class="col-md-1 hour">
          06
        </div>
        <input class="col-md-10 description" id="06">
        </input>
        <button class="btn saveBtn col-md-1" id="06">Save!</button>
      </div>
      <div class="row time-block" id="hr07">
        <div class="col-md-1 hour">
          07
        </div>
        <input class="col-md-10 description" id="07">
        </input>
        <button class="btn saveBtn col-md-1" id="07">Save!</button>
      </div>
      <div class="row time-block" id="hr08">
        <div class="col-md-1 hour">
          08
        </div>
        <input class="col-md-10 description" id="08">
        </input>
        <button class="btn saveBtn col-md-1" id="08">Save!</button>
      </div>
      <div class="row time-block" id="hr09">
        <div class="col-md-1 hour">
          09
        </div>
        <input class="col-md-10 description" id="09">
        </input>
        <button class="btn saveBtn col-md-1" id="09">Save!</button>
      </div>
      <div class="row time-block" id="hr10">
        <div class="col-md-1 hour">
          10
        </div>
        <input class="col-md-10 description" id="10">
        </input>
        <button class="btn saveBtn col-md-1" id="10">Save!</button>
      </div>
      <div class="row time-block" id="hr11">
        <div class="col-md-1 hour">
          11
        </div>
        <input class="col-md-10 description" id="11">
        </input>
        <button class="btn saveBtn col-md-1" id="11">Save!</button>
      </div>
      <div class="row time-block" id="hr12">
        <div class="col-md-1 hour">
          12
        </div>
        <input class="col-md-10 description" id="12">
        </input>
        <button class="btn saveBtn col-md-1" id="12">Save!</button>
      </div>
      <div class="row time-block" id="hr13">
        <div class="col-md-1 hour">
          13
        </div>
        <input class="col-md-10 description" id="13">
        </input>
        <button class="btn saveBtn col-md-1" id="13">Save!</button>
      </div>
      <div class="row time-block" id="hr14">
        <div class="col-md-1 hour">
          14
        </div>
        <input class="col-md-10 description" id="14">
        </input>
        <button class="btn saveBtn col-md-1" id="14">Save!</button>
      </div>
      <div class="row time-block" id="hr15">
        <div class="col-md-1 hour">
          15
        </div>
        <input class="col-md-10 description" id="15">
        </input>
        <button class="btn saveBtn col-md-1" id="15">Save!</button>
      </div>
      <div class="row time-block" id="hr16">
        <div class="col-md-1 hour">
          16
        </div>
        <input class="col-md-10 description" id="16">
        </input>
        <button class="btn saveBtn col-md-1" id="16">Save!</button>
      </div>
      <div class="row time-block" id="hr17">
        <div class="col-md-1 hour">
          17
        </div>
        <input class="col-md-10 description" id="17">
      </input>
        <button class="btn saveBtn col-md-1" id="17">Save!</button>
      </div>
      <div class="row time-block" id="hr18">
        <div class="col-md-1 hour">
          18
        </div>
        <input class="col-md-10 description" id="18">
        </input>
        <button class="btn saveBtn col-md-1" id="18">Save!</button>
      </div>
      <div class="row time-block" id="hr19">
        <div class="col-md-1 hour">
          19
        </div>
        <input class="col-md-10 description" id="19">
        </input>
        <button class="btn saveBtn col-md-1" id="19">Save!</button>
      </div>
      <div class="row time-block" id="hr20">
        <div class="col-md-1 hour">
          20
        </div>
        <input class="col-md-10 description" id="20">
        </input>
        <button class="btn saveBtn col-md-1" id="20">Save!</button>
      </div>
      <div class="row time-block" id="hr21">
        <div class="col-md-1 hour">
          21
        </div>
        <input class="col-md-10 description" id="21">
        </input>
        <button class="btn saveBtn col-md-1" id="21">Save!</button>
      </div>
      <div class="row time-block" id="hr22">
        <div class="col-md-1 hour">
          22
        </div>
        <input class="col-md-10 description" id="22">
        </input>
        <button class="btn saveBtn col-md-1" id="22">Save!</button>
      </div>
      <div class="row time-block" id="hr23">
        <div class="col-md-1 hour">
          23
        </div>
        <input class="col-md-10 description" id="23">
        </input>
        <button class="btn saveBtn col-md-1" id="23">Save!</button>
      </div>
      
    
      <!-- actually generate div elements perhaps with text input fields in them -->
        <!-- each has corresponding class or data attributs that corr. to hour of the day so we can identify each slot and get its reference -->
    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script>

      var today = moment().format('DDD'); 
      var currentHour = moment().hour();
      console.log(currentHour);  
      console.log(today);
      // console.log(todaysAgenda)
      // localStorage.clear();
      var todaysAgendaString = localStorage.getItem(today);
      var todaysAgenda = JSON.parse(todaysAgendaString);
      var timeSlots = document.getElementsByClassName("description");

      
      // console.log(todaysAgenda)
      // localStorage.setItem(today, '{"hr9": "get up", "hr10": "go for a walk"}');
      // localStorage.setItem(+today +1, '{"09": "eat", "10": "sleep"}');
      var todayDisplay = $("#currentDay") 
      todayDisplay.text(moment().format('dddd, MMMM Do YYYY'));
      
      $(".saveBtn").click(function(){
        // console.log(this.id);
        var hourSlot = this.id;
        // console.log(hourSlot);
        var currentTask = this.previousElementSibling.value;
        // console.log(this.previousElementSibling.value);
        var hourKey = hourSlot;
        var taskValue = JSON.stringify(currentTask);
        // console.log(hourKey);
        localStorage.setItem(hourSlot, currentTask);
      })
        // Attempting to store all events in one array, like one would for a multi-day agenda app. However, realized the assignment was only concerned with one day. Kept for reference as never quite worked.
        // currentTaskObj = {currentTask: currentTask}
        // currentTaskObj = {}
        // currentTaskObj[hourSlot] = currentTask;
        // // hourSlot = currentTaskObj.label;
        // // currentTask = currentTaskObj.value;
        // // tasksArray.push(currentTaskObj);
        // console.log(currentTaskObj);
        // tasksArray.push(currentTaskObj);
        // console.log(tasksArray);
        // localStorage.setItem(today, tasksArray);
        // JSON.stringify(tasksArray);
        // console.log(tasksArray);
// setting color formatting for time slots
      // console.log(timeSlots);
      for(var i = 0; i< timeSlots.length; i++){
        // console.log(timeSlots[i]);
        if(+timeSlots[i].id < currentHour){
          timeSlots[i].className = timeSlots[i].className + " past "
        }
        else if(+timeSlots[i].id === currentHour){
          timeSlots[i].className = timeSlots[i].className + " present "
        }
        else {
          timeSlots[i].className = timeSlots[i].className + " future "
        }
      }
      for(var i = 0; i< timeSlots.length; i++){
          
        if(timeSlots[i].id < 10){
        timeSlots[i].value = localStorage[timeSlots[i].id];
        if (timeSlots[i].value === "undefined"){
          timeSlots[i].value = "";
        }
        }
        else{
        timeSlots[i].value = localStorage[i];
        if (timeSlots[i].value === "undefined"){
         timeSlots[i].value = "";
        }
        }
      }
      

    </script>
  </body>
</html>
